@model MyToDoList.ViewModels.CategoryViewModels.IndexViewModel
@{
    ViewBag.Title = "Kategoria";
}
<head>

    <link href="~/Styles/Category-Index.css" rel="stylesheet" />
</head>
<div class="container=fluid">
    <h1>@Model.Category.Name</h1>
    <div class="row">
        <div class="col-lg-8">

            @foreach (Day day in Enum.GetValues(typeof(Day)))
            {
                <div id="@day.ToString()" class="panel panel-danger">
                    <div class="panel-heading">

                        @switch ((int)day)
                {
                    case 1:
                                <h3 class="panel-title">Poniedziałek</h3>
                                break;
                            case 2:
                                <h3 class="panel-title">Wtorek</h3>
                                break;
                            case 3:
                                <h3 class="panel-title">Środa</h3>
                                break;
                            case 4:
                                <h3 class="panel-title">Czwartek</h3>
                                break;
                            case 5:
                                <h3 class="panel-title">Piatek</h3>
                                break;
                            case 6:
                                <h3 class="panel-title">Sobota</h3>
                                break;
                            case 7:
                                <h3 class="panel-title">Niedziela</h3>
                                break;
                            default: throw new Exception("Takie dzień nie istnieje");
                        }
                    </div>
                    <div class="panel-body">
                        @foreach (var duty in Model.Category.Duties.Where(d => d.Day == day))
                        {

                           
                            var dict = new Dictionary<string, string>()
                                {
                                    {"CategoryId",Model.Category.Id.ToString() },
                                    {"DutyId",duty.Id.ToString() }

                                };

                            <form method="post">
                                <div class="duty">
                                    <p>
                                        <span>@duty.Content</span>
                                        <button type="submit" class="btn btn-default InvisibleButton" asp-action="RemoveDuty" asp-controller="Category" asp-all-route-data="@dict">
                                            <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
                                        </button>
                                        <div class="progress">
                                            <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">
                                            </div>
                                        </div>
                                    </p>
                                </div>
                            </form>
                        }
                    </div>
                    <form method="post" asp-action="AddDuty" asp-controller="Category" asp-route-StringDay="@day.ToString()" asp-antiforgery="true">
                    <div class="input-group">
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="submit">Dodaj zadanie</button>
                        </span>
                        <input asp-for="@Model.NewDutyContent" type="text" class="form-control">
                        <input type="hidden" asp-for="@Model.CategoryId" value="@Model.Category.Id" />
                     </div>
                    </form>
                </div>

            }
        </div>
        <form method="post" asp-antiforgery="true">
            <div class="col-lg-4">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="input-group">

                            <span class="input-group-btn">
                                <button asp-action="RemoveAllDuties" asp-controller="Category" asp-route-id="@Model.Category.Id" class="btn btn-danger BigButton" type="submit">Usuń wszystkie zadania</button>
                            </span>
                        </div>
                    </div>
                    <div class="col-lg-12">
                        <span class="input-group-btn ">
                            <button asp-action="RemoveCategory" asp-controller="Category" asp-route-id="@Model.Category.Id" class="btn btn-danger BigButton" type="submit">Usuń kategorię: @Model.Category.Name</button>
                        </span>
                    </div>

                </div>
            </div>
        </form>
    </div>
</div>